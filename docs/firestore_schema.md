# Firestore Schema Documentation

This document outlines the structure of Firestore collections and their documents used in the Build Canada Promise Tracker project.

## Collection: `promises_2021_mandate`

**Description:** Holds individual commitments primarily sourced from the 2021 Canadian Federal Government's Mandate Letter Commitments (MLC) CSV file. This collection will also store promises extracted from other 2021 election-related sources like full mandate letters, campaign platforms, and video transcripts, with appropriate `source_type` differentiation.

**Document ID:** The `promise_id` field (e.g., the `MLC ID` for mandate letter commitments).

**Key Fields:**

*   `promise_id`:
    *   `Data Type`: String
    *   `Description`: Unique identifier for the promise. For MLCs, this is the `MLC ID`. For other sources, a unique ID will be generated.
    *   `Source`: `MLC ID` from `commitments-engagements-eng-2021 - MLC.csv` for structured mandate commitments.
    *   `Example`: `"100"`
*   `text`:
    *   `Data Type`: String
    *   `Description`: The full text of the commitment or promise.
    *   `Source`: `Commitment` column from MLC.csv; extracted text from other sources.
    *   `Example`: `"Ensure the overall fiscal health of the government..."`
*   `key_points`:
    *   `Data Type`: Array of Strings
    *   `Description`: Concise, actionable bullet points summarizing the promise.
    *   `Source`: Currently a placeholder (duplicates `text` for MLC.csv). To be refined/generated by LLM (Gemini) processing for all promise types.
    *   `Example`: `["Ensure overall fiscal health of government", "Implement Budget 2021 fiscal plan", "Drive long-term economic growth plan"]` (Target state after LLM)
*   `source_document_url`:
    *   `Data Type`: String
    *   `Description`: URL pointing to the original source document or page where the promise was found.
    *   `Source`: Manually set for MLC.csv (generic link); specific URL for scraped letters, platforms, videos.
    *   `Example`: `"https_pm.gc.ca_eng_ministerial-mandate-letters_2021"` (placeholder for MLCs), or a specific pm.gc.ca letter URL.
*   `source_type`:
    *   `Data Type`: String
    *   `Description`: Indicates the origin type of the promise.
    *   `Source`: Set by ingestion script based on data origin.
    *   `Example`: `"Mandate Letter Commitment (Structured)"`, `"Mandate Letter (Full Text)"`, `"Election Platform (2021)"`, `"Campaign Video (2021)"`
*   `date_issued`:
    *   `Data Type`: String (ISO 8601 format preferred, e.g., "YYYY-MM-DD")
    *   `Description`: The publication date of the source document or the date the promise was made.
    *   `Source`: Set for MLC.csv; extracted from metadata of other sources.
    *   `Example`: `"2021-12-16"`
*   `candidate_or_government`:
    *   `Data Type`: String
    *   `Description`: Identifies if the promise originated from a specific candidate during a campaign or from an official government document.
    *   `Source`: Set by ingestion script.
    *   `Example`: `"Government of Canada (2021 Mandate)"`, `"Mark Carney (Liberal Party)"`
*   `party`:
    *   `Data Type`: String
    *   `Description`: The political party associated with the promise (if applicable, especially for campaign promises or governing party's mandate).
    *   `Source`: Set by ingestion script.
    *   `Example`: `"Liberal Party of Canada"`
*   `category`:
    *   `Data Type`: String (or null)
    *   `Description`: Thematic category of the promise (e.g., Economy, Healthcare, Housing).
    *   `Source`: Currently `null` for MLC.csv. To be assigned by LLM (Gemini) or mapped from lead department.
    *   `Example`: `"Economy"`
*   `responsible_department_lead`:
    *   `Data Type`: String (or null)
    *   `Description`: The standardized name of the lead government department responsible for this promise, if applicable.
    *   `Source`: Derived from `Reporting Lead` in MLC.csv via `standardize_department_name()`.
    *   `Mapping Notes`: See `/docs/data-model/department_mapping.md`.
    *   `Example`: `"Finance Canada"`
*   `relevant_departments`:
    *   `Data Type`: Array of Strings
    *   `Description`: List of standardized names of all government departments involved in the promise.
    *   `Source`: Derived from `All ministers` in MLC.csv via `standardize_department_name()`.
    *   `Mapping Notes`: Each item is a standardized department name. See `/docs/data-model/department_mapping.md`.
    *   `Example`: `["Finance Canada", "Canada Revenue Agency"]`
*   `mlc_raw_reporting_lead`:
    *   `Data Type`: String (or null)
    *   `Description`: The original, unprocessed `Reporting Lead` string from the MLC.csv. For reference and debugging mapping.
    *   `Source`: `Reporting Lead` column from MLC.csv.
    *   `Example`: `"Deputy Prime Minister and Minister of Finance"`
*   `mlc_raw_all_ministers`:
    *   `Data Type`: String (or null)
    *   `Description`: The original, unprocessed `All ministers` string from the MLC.csv. For reference and debugging mapping.
    *   `Source`: `All ministers` column from MLC.csv.
    *   `Example`: `"Deputy Prime Minister and Minister of Finance; Minister of National Revenue"`

---

*(Future Collections like `evidence`, `mandate_letter_fulltext` will be added here as they are developed)*

## (Future) Collection: `evidence`

**Description:** Stores pieces of evidence related to promises (news articles, bill statuses, Hansard mentions, report findings).

**Document ID:** `evidence_id` (to be generated).

**Key Fields (indicative):**

*   `evidence_id`:
    *   `Data Type`: String
    *   `Description`: Unique identifier for the piece of evidence.
*   `promise_ids`:
    *   `Data Type`: Array of Strings
    *   `Description`: List of `promise_id`s that this evidence relates to.
*   `evidence_type`:
    *   `Data Type`: String
    *   `Description`: Type of evidence.
    *   `Example`: `"News Article"`, `"Bill Status Update"`, `"Hansard Mention"`, `"Report Finding"`
*   `source_url`:
    *   `Data Type`: String
    *   `Description`: URL of the evidence source.
*   `date_published`:
    *   `Data Type`: String (ISO 8601 format preferred)
    *   `Description`: Publication date of the evidence.
*   `summary_text`:
    *   `Data Type`: String
    *   `Description`: LLM-generated or manually created summary of the evidence.
*   `raw_text_snippet`:
    *   `Data Type`: String
    *   `Description`: Relevant snippet of text from the source.
*   `linked_department(s)`:
    *   `Data Type`: Array of Strings
    *   `Description`: Standardized department names linked to this evidence.

## (Future) Collection: `mandate_letters_fulltext`

**Description:** Stores the full scraped text of mandate letters.

**Document ID:** `letter_url` or a generated ID.

**Key Fields (indicative):**

*   `minister_name`:
    *   `Data Type`: String
    *   `Description`: Name of the Minister to whom the letter is addressed.
*   `letter_url`:
    *   `Data Type`: String
    *   `Description`: URL of the source mandate letter.
*   `full_text`:
    *   `Data Type`: String
    *   `Description`: Complete text content of the mandate letter.
*   `date_scraped`:
    *   `Data Type`: String (ISO 8601 format preferred)
    *   `Description`: Date when the letter was scraped.